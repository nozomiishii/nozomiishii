# @see
# https://github.com/evilmartians/lefthook
#
# Run the command to test:
#   pnpx lefthook run [-v,--verbose] <hook-name>
#
# Examples:
#   pnpx lefthook run --verbose pre-commit
#   pnpx lefthook run --verbose commit-msg
#   pnpx lefthook run --verbose post-merge
extends:
  - ./node_modules/@nozomiishii/lefthook-config/index.yaml

pre-commit:
  parallel: true

  jobs:
    - name: lint-textlint
      glob: '*.md'
      run: pnpm exec textlint {staged_files}

    - name: generate-pdf-cv
      glob: 'src/cv/cv-ja.md'
      run: pnpm run pdf:cv src/cv/cv-ja.md && git add src/cv/cv-ja.pdf

    - name: generate-pdf-pay
      glob: 'src/pay/pay-ja.md'
      run: pnpm run pdf:pay src/pay/pay-ja.md && git add src/pay/pay-ja.pdf
